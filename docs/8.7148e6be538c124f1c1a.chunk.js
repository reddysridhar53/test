(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{d26ce50b3dc06afd0821:function(e,t,n){"use strict";n.r(t);var o,r=n("8af190b70a6bc55c6f1b"),a=n.n(r),i=(n("8a2d1b95e05b6a321e74"),n("d7dd51e1bf6bfc2c9c3d")),c=n("0d7f0986bcd2f33d8a2a"),l=n("a28fc3c963a1d4d1a2e5"),d=n("ab4cb61bcb2dc161defb"),s=n("0b3cb19af78752326f59"),m=n("e95a63b25fb92ed15721"),p=s.c.div.withConfig({displayName:"styledElements__PostPageWrapper",componentId:"zcbq5b-0"})(["display:flex;flex:1;width:100%;height:100%;flex-direction:column;"]),f=s.c.h1.withConfig({displayName:"styledElements__H",componentId:"zcbq5b-1"})(["font-size:2.4em;font-weight:600;color:rgba(0,0,0,1);text-transform:capitalize;"]),u=s.c.div.withConfig({displayName:"styledElements__PostCommentWrapper",componentId:"zcbq5b-2"})(["width:100%;max-width:964px;margin:0 auto;@media screen and (max-width:964px){padding:10px;}"]),b=s.c.div.withConfig({displayName:"styledElements__PostContainer",componentId:"zcbq5b-3"})(["display:flex;flex:1;flex-direction:column;"]),g=s.c.div.withConfig({displayName:"styledElements__PostContent",componentId:"zcbq5b-4"})(["font-size:1.4em;display:flex;flex-direction:column;flex:1;"]),y=s.c.div.withConfig({displayName:"styledElements__CommentsContainer",componentId:"zcbq5b-5"})(["display:flex;flex:1;flex-direction:column;"]),h=s.c.div.withConfig({displayName:"styledElements__CommentsContent",componentId:"zcbq5b-6"})(["font-size:1.1em;display:flex;flex-direction:column;flex:1;"]),v=s.c.div.withConfig({displayName:"styledElements__PostItem",componentId:"zcbq5b-7"})(["background:#fff;padding:2em;display:flex;flex-direction:column;margin-bottom:1em;border-radius:5px;box-shadow:2px 2px 2px 0px rgba(0,0,0,0.01);"]),x=s.c.h2.withConfig({displayName:"styledElements__PostTitle",componentId:"zcbq5b-8"})(["font-size:2em;color:rgba(0,0,0,0.75);margin:0;margin-bottom:0.5em;@media screen and (max-width:964px){font-size:1.5em;}"]),C=s.c.div.withConfig({displayName:"styledElements__PostBody",componentId:"zcbq5b-9"})(["font-size:1.5em;font-weight:500;color:rgba(0,0,0,0.75);text-transform:capitalize;@media screen and (max-width:964px){font-size:1.2em;}"]),_=Object(s.c)(m.Link).withConfig({displayName:"styledElements__PostUser",componentId:"zcbq5b-10"})(["color:rgb(83,77,253);font-weight:500;font-size:1.6em;display:flex;align-self:flex-end;transition:250ms all ease-in;margin-top:0.5em;text-transform:capitalize;text-decoration:none;&:hover{color:rgb(162,103,214);}@media screen and (max-width:964px){font-size:1.2em;}"]),w=s.c.div.withConfig({displayName:"styledElements__PageTitle",componentId:"zcbq5b-11"})(["display:flex;flex:1;font-size:2em;margin:1em 0 0.5em;font-weight:600;color:rgba(0,0,0,1);text-transform:capitalize;"]),O=s.c.div.withConfig({displayName:"styledElements__PageTitleWrapper",componentId:"zcbq5b-12"})(["display:flex;align-items:center;justify-content:space-between;"]),S=s.c.button.withConfig({displayName:"styledElements__CommentButton",componentId:"zcbq5b-13"})(["color:white;align-self:center;transition:250ms all ease-in;height:4rem;width:16rem;font-size:1.5rem;border-radius:2rem;cursor:pointer;box-shadow:rgba(0,0,0,0.16) 0px 1px 3px,rgba(0,0,0,0.23) 0px 1px 3px;background:linear-gradient(to right,rgb(134,93,234),rgb(183,110,255));&:hover{box-shadow:rgba(0,0,0,0.16) 0px 3px 6px,rgba(0,0,0,0.23) 0px 3px 6px;}"]),P=(s.c.div.withConfig({displayName:"styledElements__ModalWrapper",componentId:"zcbq5b-14"})(["font-size:14px;"]),s.c.div.withConfig({displayName:"styledElements__ModalHeader",componentId:"zcbq5b-15"})(["font-size:2em;display:flex;align-items:center;justify-content:center;"])),E=s.c.div.withConfig({displayName:"styledElements__RowWrapper",componentId:"zcbq5b-16"})(["margin-bottom:10px;display:flex;flex-direction:column;"]),z=s.c.label.withConfig({displayName:"styledElements__Label",componentId:"zcbq5b-17"})(["font-size:15px;margin-bottom:5px;"]),I=s.c.button.withConfig({displayName:"styledElements__Btn",componentId:"zcbq5b-18"})(["transition:250ms all ease-in;outline:0;cursor:pointer;font-size:15px;height:40px;padding:0 2em;border-radius:4px;"]),j=s.c.div.withConfig({displayName:"styledElements__ModalContent",componentId:"zcbq5b-19"})(["display:flex;flex:1;width:100%;"]),N=s.c.div.withConfig({displayName:"styledElements__ModalFooter",componentId:"zcbq5b-20"})([""]),q=Object(s.c)(I).withConfig({displayName:"styledElements__SaveCommentButton",componentId:"zcbq5b-21"})(["margin-right:1em;background:linear-gradient(to right,rgb(134,93,234),rgb(183,110,255));color:rgba(255,255,255,0.8);&:hover{transform:translateY(-1px);color:rgba(255,255,255,1);}"]),M=Object(s.c)(I).withConfig({displayName:"styledElements__CancelButton",componentId:"zcbq5b-22"})(["border:1px solid rgba(0,0,0,0.5);color:rgba(0,0,0,0.5);&:hover{transform:translateY(-1px);color:rgba(0,0,0,0.8);}"]),T=s.c.form.withConfig({displayName:"styledElements__Form",componentId:"zcbq5b-23"})(["display:flex;flex-direction:column;width:100%;padding:2em;"]),k=s.c.input.withConfig({displayName:"styledElements__Input",componentId:"zcbq5b-24"})(["height:45px;border:1px solid rgba(0,0,0,0.2);border-radius:4px;padding:5px 10px;outline:none;font-size:15px;"]),A=s.c.textarea.withConfig({displayName:"styledElements__TextArea",componentId:"zcbq5b-25"})(["height:120px;resize:none;padding:5px 10px;border-radius:4px;font-size:15px;outline:none;border:1px solid rgba(0,0,0,0.2);"]),R=s.c.div.withConfig({displayName:"styledElements__ModalInner",componentId:"zcbq5b-26"})(["padding:2em;height:100%;flex:1;align-items:center;justify-content:space-between;display:flex;flex-direction:column;"]);function D(e,t,n,r){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var c in a)void 0===t[c]&&(t[c]=a[c]);else t||(t=a||{});if(1===i)t.children=r;else if(i>1){for(var l=new Array(i),d=0;d<i;d++)l[d]=arguments[d+3];t.children=l}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var J=function(e){var t=e.data,n=t.title,o=t.content,r=t.user;return D(v,{},void 0,D(x,{},void 0,n),D(C,{},void 0,o),D(_,{to:"/users/".concat(r.id)},void 0,r.name))},B=n("adc20f99e57c573c589c"),F=n("d95b0cf107403b178365"),G=n("54f683fcda7806277002"),H="ADD_COMMENT",Y="GET_POST_BY_ID",W="GET_POST_BY_ID_SUCCESS",L="GET_POST_BY_ID_ERROR",U="GET_COMMENTS_BY_POST_ID",$="GET_COMMENTS_BY_POST_ID_SUCCESS",K="GET_COMMENTS_BY_POST_ID_ERROR",Q=Object(G.fromJS)({loadingPost:!1,loadingComments:!1,post:{},comments:[],postId:""}),V=function(e,t){var n=localStorage.getItem("comments");n&&JSON.parse(n)?((n=JSON.parse(n))[e]?n[e]=[t].concat(n[e]):n[e]=[t],localStorage.setItem("comments",JSON.stringify(n))):((n={})[e]=[t],localStorage.setItem("comments",JSON.stringify(n)))},X=function(e){if(!e)return[];var t=localStorage.getItem("comments");return t&&JSON.parse(t)&&(t=JSON.parse(t))[e]?t[e]:[]};var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:V(t.payload.postId,t.payload.comment);var n=e.get("comments");return console.log(n),e.update("comments",function(e){return e.unshift(t.payload.comment)});case Y:return e.set("loadingPost",!0);case L:return e.set("loadingPost",!1);case W:return e.set("loadingPost",!1).set("post",Object(G.fromJS)(t.payload));case U:return e.set("loadingComments",!0).set("postId",t.payload);case K:return e.set("loadingComments",!1);case $:var o=X(e.get("postId"));return e.set("loadingComments",!1).set("comments",Object(G.fromJS)(o.concat(t.payload)));default:return e}},ee=function(e){return e.get("postPage",Q)},te=n("6c68d13fe9e3e77d8fc4"),ne=n("74c8eb96ab0c694f20d1");function oe(e){return{type:L,payload:e}}function re(e){return{type:K,payload:e}}var ae=regeneratorRuntime.mark(le),ie=regeneratorRuntime.mark(de),ce=regeneratorRuntime.mark(se);function le(e){var t,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,o.next=4,Object(te.b)(ne.e,t);case 4:return n=o.sent,o.next=7,Object(te.c)({type:W,payload:n});case 7:o.next=13;break;case 9:return o.prev=9,o.t0=o.catch(1),o.next=13,Object(te.c)(oe(o.t0));case 13:case"end":return o.stop()}},ae,this,[[1,9]])}function de(e){var t,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,o.next=4,Object(te.b)(ne.d,t);case 4:return n=o.sent,o.next=7,Object(te.c)({type:$,payload:n});case 7:o.next=13;break;case 9:return o.prev=9,o.t0=o.catch(1),o.next=13,Object(te.c)(re(o.t0));case 13:case"end":return o.stop()}},ie,this,[[1,9]])}function se(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.a)([Object(te.e)(Y,le),Object(te.e)(U,de)]);case 2:case"end":return e.stop()}},ce,this)}var me,pe=n("19be155092ade822ed25"),fe=n("f3e27fd1cdba8fb4b92c"),ue=n("4eb2980d0dff041f10f0"),be=n.n(ue);function ge(e,t,n,o){me||(me="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&r)for(var i in r)void 0===t[i]&&(t[i]=r[i]);else t||(t=r||{});if(1===a)t.children=o;else if(a>1){for(var c=new Array(a),l=0;l<a;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:me,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=ge(P,{},void 0,"Add Comment"),ve=ge(z,{},void 0,"Title"),xe=ge(z,{},void 0,"Content");function Ce(e){var t=e.openAddCommentModal,n=e.closeAddCommentModal,o=e.handleContentChange,r=e.commentForm,a=e.handleSaveComment,i=function(e){var t=e.target.name,n=e.target.value,a=(r.title,r.content,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){ye(e,t,n[t])})}return e}({},r,ye({},t,n)));o(a)};return ge(be.a,{isOpen:t,onRequestClose:n,className:"modal",overlayClassName:"modal-overlay"},void 0,ge(R,{},void 0,he,ge(j,{},void 0,ge(T,{},void 0,ge(E,{},void 0,ve,ge(k,{name:"title",placeholder:"Title",onChange:i,value:r.title})),ge(E,{},void 0,xe,ge(A,{name:"content",placeholder:"Content",onChange:i,value:r.content})))),ge(N,{},void 0,ge(q,{onClick:a},void 0,"save"),ge(M,{onClick:n},void 0,"cancel"))))}function _e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var we,Oe=n("6131d953c7a3da2d75af"),Se=n.n(Oe);function Pe(e){return(Pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t,n,o){we||(we="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&r)for(var i in r)void 0===t[i]&&(t[i]=r[i]);else t||(t=r||{});if(1===a)t.children=o;else if(a>1){for(var c=new Array(a),l=0;l<a;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:we,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function ze(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"PostPage",function(){return Fe});var Me=Ee(fe.a,{}),Te=Ee(f,{},void 0,"No Post Found."),ke=Ee(fe.a,{}),Ae=Ee(f,{},void 0,"No Comments."),Re=Ee(c.Helmet,{},void 0,Ee("title",{},void 0,"Huddl Post Page - Sample post(Frontend Task)"),Ee("meta",{name:"description",content:"Sample Post Detail Page"})),De=Ee(pe.a,{to:"/"},void 0,"Go to Posts"),Je=Ee(w,{},void 0,"Post"),Be=Ee(w,{},void 0,"Comments"),Fe=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=this,r=(e=Ie(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==Pe(r)&&"function"!==typeof r?Ne(o):r,qe(Ne(Ne(n)),"state",{openAddCommentModal:!1,commentForm:{}}),qe(Ne(Ne(n)),"closeAddCommentModal",function(){n.setState({openAddCommentModal:!1})}),qe(Ne(Ne(n)),"handleAddCommentModal",function(){n.setState({openAddCommentModal:!0})}),qe(Ne(Ne(n)),"handleContentChange",function(e){n.setState({commentForm:e})}),qe(Ne(Ne(n)),"handleSaveComment",function(){var e=n.props.onAddComment,t=n.props.match.params.postId,o=n.state.commentForm,r=o,a=r.title,i=r.content;a&&i&&(o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){qe(e,t,n[t])})}return e}({},o,{user:{id:100,name:"dummy"}}),e&&e({postId:t,comment:o}),n.setState({openAddCommentModal:!1}))}),qe(Ne(Ne(n)),"highlightText",function(){var e=n.props.location;if(e.search)if("URLSearchParams"in window){var t=new URLSearchParams(e.search);t.get("query")&&n.highlightSearchedtext(t.get("query"))}else{var o=_e("query");o&&n.highlightSearchedtext(o)}}),qe(Ne(Ne(n)),"highlightSearchedtext",function(e){if(n.postContainer&&n.postContainer.current){var t=n.postContainer.current;if(t){console.log("Elm: ",t);var o=t.innerHTML,r=new RegExp(e,"gi"),a=o.replace(r,"<mark>".concat(e,"</mark>"));t.innerHTML=a,console.log("Elm: ",t)}}}),qe(Ne(Ne(n)),"renderPostDetails",function(){var e=n.props,t=e.post;if(e.loadingPost)return Me;if(!Object.keys(t).length)return Te;var o=t.title,r=t.user,a=t.content;return Ee(v,{},void 0,Ee(x,{},void 0,Ee(Se.a,{searchWords:[_e("query")],autoEscape:!0,textToHighlight:o})),Ee(C,{},void 0,Ee(Se.a,{searchWords:[_e("query")],autoEscape:!0,textToHighlight:a})),Ee(_,{to:"/users/".concat(r.id)},void 0,r.name))}),qe(Ne(Ne(n)),"renderComments",function(){var e=n.props,t=e.comments;return e.loadingComments?ke:t.length?t.map(function(e,t){return Ee(J,{data:e},e.id+"-"+t)}):Ae}),n}var n,o,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.props.match.params.postId;this.postContainer=a.a.createRef(),this.props.onGetPost(e),this.props.onGetComments(e)}},{key:"render",value:function(){return Ee(r.Fragment,{},void 0,Ee(p,{},void 0,Re,Ee(u,{},void 0,De,Ee(b,{},void 0,Ee(O,{},void 0,Je,Ee(S,{onClick:this.handleAddCommentModal},void 0,"Add Comment")),a.a.createElement(g,{ref:this.postContainer},this.renderPostDetails())),Ee(y,{},void 0,Be,Ee(h,{},void 0,this.renderComments())))),this.state.openAddCommentModal?Ee(Ce,{openAddCommentModal:this.state.openAddCommentModal,closeAddCommentModal:this.closeAddCommentModal,handleContentChange:this.handleContentChange,handleSaveComment:this.handleSaveComment,commentForm:this.state.commentForm}):null)}}])&&ze(n.prototype,o),i&&ze(n,i),t}(),Ge=Object(l.b)({post:Object(l.a)(ee,function(e){return e.get("post").toJS()}),comments:Object(l.a)(ee,function(e){return e.get("comments").toJS()}),loadingPost:Object(l.a)(ee,function(e){return e.get("loadingPost")}),loadingComments:Object(l.a)(ee,function(e){return e.get("loadingComments")})}),He=Object(i.connect)(Ge,function(e){return{onAddComment:function(t){return e({type:H,payload:t})},onGetPost:function(t){return e({type:Y,payload:t})},onGetComments:function(t){return e({type:U,payload:t})}}}),Ye=Object(F.a)({key:"postPage",reducer:Z}),We=Object(B.a)({key:"postPage",saga:se});t.default=Object(d.compose)(Ye,We,He)(Fe)}}]);